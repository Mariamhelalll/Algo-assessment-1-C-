using System;
using System.IO;
using System.Collections.Generic;

class Program
{
    static void Main()
    {
        string filePath = "Share_1_256.txt";
        int [] Array = ReadFileToArray(filePath);

        if (Array.Length>0)
        {
            Console.WriteLine("File is found and read successfully !");
            for (int i =0 ; i <Math.Min (5, Array.Length); i++)
            {
                Console.WriteLine (Array[i]);
            }
        }

        else
        {
            Console.WriteLine("No suitable data found in the file !");
        }
    }

    static int[] ReadFileToArray(string filePath)
    {
        List<int> list = new List <int>();

        try
        {
            if (!File.Exists(filePath))
            {
                Console.WriteLine($"Error: file {filePath} not found");
                return new int [0]; // Return empty array to prevent crashes.

            }

            using (StreamReader sr = new StreamReader(filePath))
            {
                string line;
                while ((line =sr.ReadLine()) !=null)
                {
                    if (int.TryParse(line.Trim(), out int value))
                    {
                        list.Add(value);
                    }

                    else
                    {
                        Console.WriteLine($"Warning: Skipping in valid value '{line}' in file.");

                    }
                }
            }

            return list.ToArray();
        }

        catch (Exception ex)
        {
            Console.WriteLine($"Error in reading file : {ex.Message}");
            return new int [0]; // Return empty array to prevent crashes
        }
    }
}